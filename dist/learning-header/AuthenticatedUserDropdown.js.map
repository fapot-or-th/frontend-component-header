{"version":3,"file":"AuthenticatedUserDropdown.js","names":["React","PropTypes","FontAwesomeIcon","faUserCircle","getConfig","injectIntl","intlShape","Dropdown","Cookies","messages","AuthenticatedUserDropdown","_ref","_Cookies$get","intl","username","dashboardMenuItem","createElement","Item","href","concat","LMS_BASE_URL","formatMessage","dashboard","domain","process","env","SESSION_COOKIE_DOMAIN","language","get","console","log","handleChangeLanguage","event","_event$target$value","newLanguage","target","value","set","window","location","reload","Fragment","className","name","onChange","Toggle","variant","icon","size","Menu","ORDER_HISTORY_URL","courses","ACCOUNT_PROFILE_URL","profile","ACCOUNT_SETTINGS_URL","account","LOGOUT_URL","signOut","propTypes","isRequired","string"],"sources":["../../src/learning-header/AuthenticatedUserDropdown.jsx"],"sourcesContent":["import React from 'react';\nimport PropTypes from 'prop-types';\n\nimport { FontAwesomeIcon } from '@fortawesome/react-fontawesome';\nimport { faUserCircle } from '@fortawesome/free-solid-svg-icons';\nimport { getConfig } from '@edx/frontend-platform';\nimport { injectIntl, intlShape } from '@edx/frontend-platform/i18n';\nimport { Dropdown } from '@openedx/paragon';\nimport Cookies from 'js-cookie';\n\nimport messages from './messages';\n\nconst AuthenticatedUserDropdown = ({ intl, username }) => {\n  const dashboardMenuItem = (\n    <Dropdown.Item href={`${getConfig().LMS_BASE_URL}/dashboard`}>\n      {intl.formatMessage(messages.dashboard)}\n    </Dropdown.Item>\n  );\n\n  const domain = process.env.SESSION_COOKIE_DOMAIN;\n\n  const language = Cookies.get('openedx-language-preference', { domain }) ?? 'en';\n\n  console.log('SESSION_COOKIE_DOMAIN', process.env.SESSION_COOKIE_DOMAIN);\n\n  const handleChangeLanguage = (event) => {\n    const newLanguage = event.target.value ?? 'en';\n    Cookies.set('openedx-language-preference', newLanguage, { domain });\n    window.location.reload();\n  };\n\n  return (\n    <>\n      <select className=\"language-selector\" value={language} name=\"language\" onChange={handleChangeLanguage}>\n        <option value=\"en\">EN</option>\n        <option value=\"th\">TH</option>\n      </select>\n      <Dropdown className=\"user-dropdown ml-3\">\n        <Dropdown.Toggle variant=\"outline-primary\">\n          <FontAwesomeIcon icon={faUserCircle} className=\"d-md-none\" size=\"lg\" />\n          <span data-hj-suppress className=\"d-none d-md-inline\">\n            {username}\n          </span>\n        </Dropdown.Toggle>\n        <Dropdown.Menu className=\"dropdown-menu-right\">\n          {dashboardMenuItem}\n          { getConfig().ORDER_HISTORY_URL && (\n            <Dropdown.Item href={`${getConfig().LMS_BASE_URL}/courses`}>\n              {intl.formatMessage(messages.courses)}\n            </Dropdown.Item>\n          )}\n          <Dropdown.Item href={`${getConfig().ACCOUNT_PROFILE_URL}/u/${username}`}>\n            {intl.formatMessage(messages.profile)}\n          </Dropdown.Item>\n          <Dropdown.Item href={getConfig().ACCOUNT_SETTINGS_URL}>\n            {intl.formatMessage(messages.account)}\n          </Dropdown.Item>\n          <Dropdown.Item href={getConfig().LOGOUT_URL}>\n            {intl.formatMessage(messages.signOut)}\n          </Dropdown.Item>\n        </Dropdown.Menu>\n      </Dropdown>\n    </>\n  );\n};\n\nAuthenticatedUserDropdown.propTypes = {\n  intl: intlShape.isRequired,\n  username: PropTypes.string.isRequired,\n};\n\nexport default injectIntl(AuthenticatedUserDropdown);\n"],"mappings":"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"}