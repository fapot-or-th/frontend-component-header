{"version":3,"file":"LearningHeader.js","names":["React","useContext","useState","PropTypes","getConfig","injectIntl","intlShape","getLoginRedirectUrl","AppContext","Squash","Hamburger","useMediaQuery","Cookies","AnonymousUserMenu","AuthenticatedUserDropdown","messages","genericMessages","LinkedLogo","_ref","href","src","alt","attributes","_objectWithoutProperties","_excluded","createElement","_extends","className","propTypes","string","isRequired","LearningHeader","_ref2","_Cookies$get","courseOrg","courseNumber","courseTitle","intl","showUserDropdown","_useContext","authenticatedUser","_useState","_useState2","_slicedToArray","isOpenMobileMenu","setIsOpenMobileMenu","isDesktop","query","headerLogo","concat","LMS_BASE_URL","LOGO_URL","SITE_NAME","fullNameTH","fullNameEN","isHideMenuItem","domain","window","location","hostname","replace","language","get","handleChangeLanguage","event","_event$target$value","newLanguage","target","value","set","reload","document","addEventListener","classList","contains","parentElement","Fragment","formatMessage","skipNavLink","toggled","toggle","style","lineHeight","name","onChange","username","dashboard","courses","ACCOUNT_PROFILE_URL","profile","ACCOUNT_SETTINGS_URL","account","LOGOUT_URL","signOut","encodeURIComponent","global","registerSentenceCase","signInSentenceCase","bool","defaultProps"],"sources":["../../src/learning-header/LearningHeader.jsx"],"sourcesContent":["import React, { useContext, useState } from 'react';\nimport PropTypes from 'prop-types';\nimport { getConfig } from '@edx/frontend-platform';\nimport { injectIntl, intlShape } from '@edx/frontend-platform/i18n';\nimport { getLoginRedirectUrl } from '@edx/frontend-platform/auth';\nimport { AppContext } from '@edx/frontend-platform/react';\nimport { Squash as Hamburger } from 'hamburger-react';\nimport { useMediaQuery } from 'react-responsive';\nimport Cookies from 'js-cookie';\n\nimport AnonymousUserMenu from './AnonymousUserMenu';\nimport AuthenticatedUserDropdown from './AuthenticatedUserDropdown';\nimport messages from './messages';\nimport genericMessages from '../generic/messages';\n\nconst LinkedLogo = ({\n  href,\n  src,\n  alt,\n  ...attributes\n}) => (\n  <a href={href} {...attributes}>\n    <img className=\"d-block\" src={src} alt={alt} />\n  </a>\n);\n\nLinkedLogo.propTypes = {\n  href: PropTypes.string.isRequired,\n  src: PropTypes.string.isRequired,\n  alt: PropTypes.string.isRequired,\n};\n\nconst LearningHeader = ({\n  courseOrg, courseNumber, courseTitle, intl, showUserDropdown,\n}) => {\n  const { authenticatedUser } = useContext(AppContext);\n  const [isOpenMobileMenu, setIsOpenMobileMenu] = useState(false);\n  const isDesktop = useMediaQuery({ query: '(min-width: 992px)' });\n\n  const headerLogo = (\n    <LinkedLogo\n      className=\"link-logo\"\n      href={`${getConfig().LMS_BASE_URL}/dashboard`}\n      src={getConfig().LOGO_URL}\n      alt={getConfig().SITE_NAME}\n    />\n  );\n\n  const fullNameTH = 'หอภาพยนตร์ (องค์การมหาชน)';\n  const fullNameEN = 'Film Archive (Public Organization)';\n  const isHideMenuItem = isDesktop || !isOpenMobileMenu;\n\n  const domain = window.location.hostname.replace('apps', '');\n\n  const language = Cookies.get('openedx-language-preference', { domain }) ?? 'en';\n\n  const handleChangeLanguage = (event) => {\n    const newLanguage = event.target.value ?? 'en';\n    Cookies.set('openedx-language-preference', newLanguage, { domain });\n    window.location.reload();\n  };\n\n  document.addEventListener('click', (event) => {\n    if (\n      !event.target.classList.contains('hamburger-react')\n      && !(\n        event.target.parentElement\n        && event.target.parentElement.classList.contains('hamburger-react')\n      ) && isOpenMobileMenu\n    ) {\n      setIsOpenMobileMenu(false);\n    }\n  });\n\n  return (\n    <>\n      <header className=\"learning-header\">\n        <div className=\"header-container container-xl\">\n          <a className=\"sr-only sr-only-focusable\" href=\"#main-content\">{intl.formatMessage(messages.skipNavLink)}</a>\n          <div className=\"py-2 d-flex header-logo\">\n            {!isDesktop && <Hamburger toggled={isOpenMobileMenu} toggle={setIsOpenMobileMenu} /> }\n            <div className=\"d-flex flex-row\">\n              {headerLogo}\n              <div className=\"full-name-container\">\n                <div className=\"full-name-th\">{fullNameTH}</div>\n                <div className=\"full-name-en\">{fullNameEN}</div>\n              </div>\n              <div className=\"flex-grow-1 course-title-lockup\" style={{ lineHeight: 1 }}>\n                <span className=\"d-block m-0 font-weight-bold course-title\">{courseTitle}</span>\n                <span className=\"d-block small m-0\">{courseOrg} {courseNumber}</span>\n              </div>\n            </div>\n            <div className=\"dropdown-conotainer\">\n              <select className=\"language-selector\" value={language} name=\"language\" onChange={handleChangeLanguage}>\n                <option value=\"en\">EN</option>\n                <option value=\"th\">TH</option>\n              </select>\n              {showUserDropdown && authenticatedUser && (\n              <AuthenticatedUserDropdown\n                username={authenticatedUser.username}\n              />\n              )}\n              {showUserDropdown && !authenticatedUser && (\n              <AnonymousUserMenu />\n              )}\n            </div>\n          </div>\n        </div>\n\n        <div className=\"banner\">\n          <div className=\"banner-container\">\n            <h2>{fullNameTH}</h2>\n            <h1>E - Learning</h1>\n          </div>\n        </div>\n\n        {!isHideMenuItem && (\n          authenticatedUser ? (\n            <div className=\"mobile-menu\">\n              <div className=\"mobile-nav-link\">\n                <a href={`${getConfig().LMS_BASE_URL}`}>\n                  {intl.formatMessage(messages.dashboard)}\n                </a>\n              </div>\n              <div className=\"mobile-nav-link\">\n                <a href={`${getConfig().LMS_BASE_URL}/courses`}>\n                  {intl.formatMessage(messages.courses)}\n                </a>\n              </div>\n              <div className=\"mobile-nav-link\">\n                <a href={`${getConfig().ACCOUNT_PROFILE_URL}/u/${authenticatedUser.username}`}>\n                  {intl.formatMessage(messages.profile)}\n                </a>\n              </div>\n              <div className=\"mobile-nav-link\">\n                <a href={`${getConfig().ACCOUNT_SETTINGS_URL}`}>\n                  {intl.formatMessage(messages.account)}\n                </a>\n              </div>\n              <div className=\"mobile-nav-link\">\n                <a href={`${getConfig().LOGOUT_URL}`}>\n                  {intl.formatMessage(messages.signOut)}\n                </a>\n              </div>\n            </div>\n          ) : (\n            <div className=\"mobile-menu\">\n              <div className=\"mobile-nav-link\">\n                <a href={`${getConfig().LMS_BASE_URL}/register?next=${encodeURIComponent(global.location.href)}`}>\n                  {intl.formatMessage(genericMessages.registerSentenceCase)}\n                </a>\n              </div>\n              <div className=\"mobile-nav-link\">\n                <a href={`${getLoginRedirectUrl(global.location.href)}`}>\n                  {intl.formatMessage(genericMessages.signInSentenceCase)}\n                </a>\n              </div>\n            </div>\n          )\n        )}\n      </header>\n      <div className=\"alocate-space\" />\n    </>\n  );\n};\n\nLearningHeader.propTypes = {\n  courseOrg: PropTypes.string,\n  courseNumber: PropTypes.string,\n  courseTitle: PropTypes.string,\n  intl: intlShape.isRequired,\n  showUserDropdown: PropTypes.bool,\n};\n\nLearningHeader.defaultProps = {\n  courseOrg: null,\n  courseNumber: null,\n  courseTitle: null,\n  showUserDropdown: true,\n};\n\nexport default injectIntl(LearningHeader);\n"],"mappings":"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"}