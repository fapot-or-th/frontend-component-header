{"version":3,"file":"LearningHeader.js","names":["React","useContext","useState","PropTypes","getConfig","injectIntl","intlShape","getLoginRedirectUrl","AppContext","Squash","Hamburger","useMediaQuery","Cookies","fapotImage","AnonymousUserMenu","AuthenticatedUserDropdown","messages","genericMessages","LinkedLogo","_ref","href","src","alt","attributes","_objectWithoutProperties","_excluded","createElement","_extends","className","propTypes","string","isRequired","LearningHeader","_ref2","courseOrg","courseNumber","courseTitle","intl","showUserDropdown","authenticatedUser","isOpenMobileMenu","setIsOpenMobileMenu","isDesktop","query","headerLogo","LMS_BASE_URL","LOGO_URL","SITE_NAME","fullNameTH","fullNameEN","isHideMenuItem","domain","window","location","hostname","replace","language","get","handleChangeLanguage","event","newLanguage","target","value","set","reload","document","addEventListener","classList","contains","parentElement","Fragment","formatMessage","skipNavLink","toggled","toggle","style","lineHeight","name","onChange","username","dashboard","courses","ACCOUNT_PROFILE_URL","profile","ACCOUNT_SETTINGS_URL","account","LOGOUT_URL","signOut","encodeURIComponent","global","registerSentenceCase","signInSentenceCase","bool","defaultProps"],"sources":["../../src/learning-header/LearningHeader.jsx"],"sourcesContent":["import React, { useContext, useState } from 'react';\nimport PropTypes from 'prop-types';\nimport { getConfig } from '@edx/frontend-platform';\nimport { injectIntl, intlShape } from '@edx/frontend-platform/i18n';\nimport { getLoginRedirectUrl } from '@edx/frontend-platform/auth';\nimport { AppContext } from '@edx/frontend-platform/react';\nimport { Squash as Hamburger } from 'hamburger-react';\nimport { useMediaQuery } from 'react-responsive';\nimport Cookies from 'js-cookie';\nimport fapotImage from '../images/fapot_Header_1_0.png';\nimport AnonymousUserMenu from './AnonymousUserMenu';\nimport AuthenticatedUserDropdown from './AuthenticatedUserDropdown';\nimport messages from './messages';\nimport genericMessages from '../generic/messages';\n\nconst LinkedLogo = ({\n  href,\n  src,\n  alt,\n  ...attributes\n}) => (\n  <a href={href} {...attributes}>\n    <img className=\"d-block\" src={src} alt={alt} />\n  </a>\n);\n\nLinkedLogo.propTypes = {\n  href: PropTypes.string.isRequired,\n  src: PropTypes.string.isRequired,\n  alt: PropTypes.string.isRequired,\n};\n\nconst LearningHeader = ({\n  courseOrg, courseNumber, courseTitle, intl, showUserDropdown,\n}) => {\n  const { authenticatedUser } = useContext(AppContext);\n  const [isOpenMobileMenu, setIsOpenMobileMenu] = useState(false);\n  const isDesktop = useMediaQuery({ query: '(min-width: 992px)' });\n\n  const headerLogo = (\n    <LinkedLogo\n      className=\"link-logo\"\n      href={`${getConfig().LMS_BASE_URL}/dashboard`}\n      src={getConfig().LOGO_URL}\n      alt={getConfig().SITE_NAME}\n    />\n  );\n\n  const fullNameTH = 'หอภาพยนตร์ (องค์การมหาชน)';\n  const fullNameEN = 'Film Archive (Public Organization)';\n  const isHideMenuItem = isDesktop || !isOpenMobileMenu;\n\n  const domain = window.location.hostname.replace('apps', '');\n\n  const language = Cookies.get('openedx-language-preference', { domain }) ?? 'en';\n\n  const handleChangeLanguage = (event) => {\n    const newLanguage = event.target.value ?? 'en';\n    Cookies.set('openedx-language-preference', newLanguage, { domain });\n    window.location.reload();\n  };\n\n  document.addEventListener('click', (event) => {\n    if (\n      !event.target.classList.contains('hamburger-react')\n      && !(\n        event.target.parentElement\n        && event.target.parentElement.classList.contains('hamburger-react')\n      ) && !(\n        event.target.parentElement?.parentElement\n        && event.target.parentElement.parentElement.classList.contains('hamburger-react')\n      ) && isOpenMobileMenu\n    ) {\n      setIsOpenMobileMenu(false);\n    }\n  });\n\n  return (\n    <>\n      <header className=\"learning-header\">\n        <div className=\"header-container container-xl\">\n          <a className=\"sr-only sr-only-focusable\" href=\"#main-content\">{intl.formatMessage(messages.skipNavLink)}</a>\n          <div className=\"py-2 d-flex header-logo\">\n            {!isDesktop && <Hamburger toggled={isOpenMobileMenu} toggle={setIsOpenMobileMenu} /> }\n            <div className=\"d-flex flex-row\">\n              {headerLogo}\n              <div className=\"flex-grow-1 course-title-lockup\" style={{ lineHeight: 1 }}>\n                <span className=\"d-block m-0 font-weight-bold course-title\">{courseTitle}</span>\n                <span className=\"d-block small m-0\">{courseOrg} {courseNumber}</span>\n              </div>\n            </div>\n            <div className=\"dropdown-conotainer\">\n              <select className=\"language-selector\" value={language} name=\"language\" onChange={handleChangeLanguage}>\n                <option value=\"en\">EN</option>\n                <option value=\"th\">TH</option>\n              </select>\n              {showUserDropdown && authenticatedUser && (\n              <AuthenticatedUserDropdown\n                username={authenticatedUser.username}\n              />\n              )}\n              {showUserDropdown && !authenticatedUser && (\n              <AnonymousUserMenu />\n              )}\n            </div>\n          </div>\n        </div>\n\n        <div className=\"banner\">\n          <div className=\"banner-container\">\n            <img src = {fapotImage} alt={fullNameTH}/>\n          </div>\n        </div>\n\n        {!isHideMenuItem && (\n          authenticatedUser ? (\n            <div className=\"mobile-menu\">\n              <div className=\"mobile-nav-link\">\n                <a href={`${getConfig().LMS_BASE_URL}`}>\n                  {intl.formatMessage(messages.dashboard)}\n                </a>\n              </div>\n              <div className=\"mobile-nav-link\">\n                <a href={`${getConfig().LMS_BASE_URL}/courses`}>\n                  {intl.formatMessage(messages.courses)}\n                </a>\n              </div>\n              <div className=\"mobile-nav-link\">\n                <a href={`${getConfig().ACCOUNT_PROFILE_URL}/u/${authenticatedUser.username}`}>\n                  {intl.formatMessage(messages.profile)}\n                </a>\n              </div>\n              <div className=\"mobile-nav-link\">\n                <a href={`${getConfig().ACCOUNT_SETTINGS_URL}`}>\n                  {intl.formatMessage(messages.account)}\n                </a>\n              </div>\n              <div className=\"mobile-nav-link\">\n                <a href={`${getConfig().LOGOUT_URL}`}>\n                  {intl.formatMessage(messages.signOut)}\n                </a>\n              </div>\n            </div>\n          ) : (\n            <div className=\"mobile-menu\">\n              <div className=\"mobile-nav-link\">\n                <a href={`${getConfig().LMS_BASE_URL}/register?next=${encodeURIComponent(global.location.href)}`}>\n                  {intl.formatMessage(genericMessages.registerSentenceCase)}\n                </a>\n              </div>\n              <div className=\"mobile-nav-link\">\n                <a href={`${getLoginRedirectUrl(global.location.href)}`}>\n                  {intl.formatMessage(genericMessages.signInSentenceCase)}\n                </a>\n              </div>\n            </div>\n          )\n        )}\n      </header>\n      <div className=\"allocate-space\" />\n    </>\n  );\n};\n\nLearningHeader.propTypes = {\n  courseOrg: PropTypes.string,\n  courseNumber: PropTypes.string,\n  courseTitle: PropTypes.string,\n  intl: intlShape.isRequired,\n  showUserDropdown: PropTypes.bool,\n};\n\nLearningHeader.defaultProps = {\n  courseOrg: null,\n  courseNumber: null,\n  courseTitle: null,\n  showUserDropdown: true,\n};\n\nexport default injectIntl(LearningHeader);\n"],"mappings":"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"}