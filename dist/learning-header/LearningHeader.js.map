{"version":3,"file":"LearningHeader.js","names":["React","useContext","useState","useRef","useEffect","useCallback","PropTypes","getConfig","injectIntl","intlShape","getLoginRedirectUrl","AppContext","Squash","Hamburger","useMediaQuery","Cookies","AnonymousUserMenu","AuthenticatedUserDropdown","messages","genericMessages","LinkedLogo","_ref","href","src","alt","attributes","_objectWithoutProperties","_excluded","createElement","_extends","className","propTypes","string","isRequired","LearningHeader","_ref2","_Cookies$get","courseOrg","courseNumber","courseTitle","intl","showUserDropdown","_useContext","authenticatedUser","_useState","_useState2","_slicedToArray","isOpenMobileMenu","setIsOpenMobileMenu","isDesktop","query","ref","headerLogo","concat","LMS_BASE_URL","LOGO_URL","SITE_NAME","fullNameTH","fullNameEN","isHideMenuItem","domain","window","location","hostname","replace","language","get","handleChangeLanguage","event","_event$target$value","newLanguage","target","value","set","reload","handleClick","current","contains","document","addEventListener","removeEventListener","Fragment","formatMessage","skipNavLink","toggled","toggle","style","lineHeight","name","onChange","username","dashboard","courses","ACCOUNT_PROFILE_URL","profile","ACCOUNT_SETTINGS_URL","account","LOGOUT_URL","signOut","encodeURIComponent","global","registerSentenceCase","signInSentenceCase","bool","defaultProps"],"sources":["../../src/learning-header/LearningHeader.jsx"],"sourcesContent":["import React, {\n  useContext,\n  useState,\n  useRef,\n  useEffect,\n  useCallback,\n} from 'react';\nimport PropTypes from 'prop-types';\nimport { getConfig } from '@edx/frontend-platform';\nimport { injectIntl, intlShape } from '@edx/frontend-platform/i18n';\nimport { getLoginRedirectUrl } from '@edx/frontend-platform/auth';\nimport { AppContext } from '@edx/frontend-platform/react';\nimport { Squash as Hamburger } from 'hamburger-react';\nimport { useMediaQuery } from 'react-responsive';\nimport Cookies from 'js-cookie';\n\nimport AnonymousUserMenu from './AnonymousUserMenu';\nimport AuthenticatedUserDropdown from './AuthenticatedUserDropdown';\nimport messages from './messages';\nimport genericMessages from '../generic/messages';\n\nconst LinkedLogo = ({\n  href,\n  src,\n  alt,\n  ...attributes\n}) => (\n  <a href={href} {...attributes}>\n    <img className=\"d-block\" src={src} alt={alt} />\n  </a>\n);\n\nLinkedLogo.propTypes = {\n  href: PropTypes.string.isRequired,\n  src: PropTypes.string.isRequired,\n  alt: PropTypes.string.isRequired,\n};\n\nconst LearningHeader = ({\n  courseOrg, courseNumber, courseTitle, intl, showUserDropdown,\n}) => {\n  const { authenticatedUser } = useContext(AppContext);\n  const [isOpenMobileMenu, setIsOpenMobileMenu] = useState(false);\n  const isDesktop = useMediaQuery({ query: '(min-width: 992px)' });\n  const ref = useRef();\n\n  const headerLogo = (\n    <LinkedLogo\n      className=\"link-logo\"\n      href={`${getConfig().LMS_BASE_URL}/dashboard`}\n      src={getConfig().LOGO_URL}\n      alt={getConfig().SITE_NAME}\n    />\n  );\n\n  const fullNameTH = 'หอภาพยนตร์ (องค์การมหาชน)';\n  const fullNameEN = 'Film Archive (Public Organization)';\n  const isHideMenuItem = isDesktop || !isOpenMobileMenu;\n\n  const domain = window.location.hostname.replace('apps', '');\n\n  const language = Cookies.get('openedx-language-preference', { domain }) ?? 'en';\n\n  const handleChangeLanguage = (event) => {\n    const newLanguage = event.target.value ?? 'en';\n    Cookies.set('openedx-language-preference', newLanguage, { domain });\n    window.location.reload();\n  };\n\n  const handleClick = useCallback((event) => {\n    if (ref.current && !ref.current.contains(event.target) && isOpenMobileMenu) {\n      setIsOpenMobileMenu(false);\n    }\n  }, [isOpenMobileMenu]);\n\n  useEffect(() => {\n    document.addEventListener('click', handleClick);\n\n    return () => {\n      document.removeEventListener('click', handleClick);\n    };\n  }, [handleClick]);\n\n  return (\n    <>\n      <header className=\"learning-header\">\n        <div className=\"header-container container-xl\">\n          <a className=\"sr-only sr-only-focusable\" href=\"#main-content\">{intl.formatMessage(messages.skipNavLink)}</a>\n          <div className=\"py-2 d-flex header-logo\">\n            {!isDesktop && <Hamburger ref={ref} toggled={isOpenMobileMenu} toggle={setIsOpenMobileMenu} /> }\n            <div className=\"d-flex flex-row\">\n              {headerLogo}\n              <div className=\"full-name-container\">\n                <div className=\"full-name-th\">{fullNameTH}</div>\n                <div className=\"full-name-en\">{fullNameEN}</div>\n              </div>\n              <div className=\"flex-grow-1 course-title-lockup\" style={{ lineHeight: 1 }}>\n                <span className=\"d-block m-0 font-weight-bold course-title\">{courseTitle}</span>\n                <span className=\"d-block small m-0\">{courseOrg} {courseNumber}</span>\n              </div>\n            </div>\n            <div className=\"dropdown-conotainer\">\n              <select className=\"language-selector\" value={language} name=\"language\" onChange={handleChangeLanguage}>\n                <option value=\"en\">EN</option>\n                <option value=\"th\">TH</option>\n              </select>\n              {showUserDropdown && authenticatedUser && (\n              <AuthenticatedUserDropdown\n                username={authenticatedUser.username}\n              />\n              )}\n              {showUserDropdown && !authenticatedUser && (\n              <AnonymousUserMenu />\n              )}\n            </div>\n          </div>\n        </div>\n\n        <div className=\"banner\">\n          <div className=\"banner-container\">\n            <h2>{fullNameTH}</h2>\n            <h1>E - Learning</h1>\n          </div>\n        </div>\n\n        {!isHideMenuItem && (\n          authenticatedUser ? (\n            <div className=\"mobile-menu\">\n              <div className=\"mobile-nav-link\">\n                <a href={`${getConfig().LMS_BASE_URL}`}>\n                  {intl.formatMessage(messages.dashboard)}\n                </a>\n              </div>\n              <div className=\"mobile-nav-link\">\n                <a href={`${getConfig().LMS_BASE_URL}/courses`}>\n                  {intl.formatMessage(messages.courses)}\n                </a>\n              </div>\n              <div className=\"mobile-nav-link\">\n                <a href={`${getConfig().ACCOUNT_PROFILE_URL}/u/${authenticatedUser.username}`}>\n                  {intl.formatMessage(messages.profile)}\n                </a>\n              </div>\n              <div className=\"mobile-nav-link\">\n                <a href={`${getConfig().ACCOUNT_SETTINGS_URL}`}>\n                  {intl.formatMessage(messages.account)}\n                </a>\n              </div>\n              <div className=\"mobile-nav-link\">\n                <a href={`${getConfig().LOGOUT_URL}`}>\n                  {intl.formatMessage(messages.signOut)}\n                </a>\n              </div>\n            </div>\n          ) : (\n            <div className=\"mobile-menu\">\n              <div className=\"mobile-nav-link\">\n                <a href={`${getConfig().LMS_BASE_URL}/register?next=${encodeURIComponent(global.location.href)}`}>\n                  {intl.formatMessage(genericMessages.registerSentenceCase)}\n                </a>\n              </div>\n              <div className=\"mobile-nav-link\">\n                <a href={`${getLoginRedirectUrl(global.location.href)}`}>\n                  {intl.formatMessage(genericMessages.signInSentenceCase)}\n                </a>\n              </div>\n            </div>\n          )\n        )}\n      </header>\n      <div className=\"alocate-space\" />\n    </>\n  );\n};\n\nLearningHeader.propTypes = {\n  courseOrg: PropTypes.string,\n  courseNumber: PropTypes.string,\n  courseTitle: PropTypes.string,\n  intl: intlShape.isRequired,\n  showUserDropdown: PropTypes.bool,\n};\n\nLearningHeader.defaultProps = {\n  courseOrg: null,\n  courseNumber: null,\n  courseTitle: null,\n  showUserDropdown: true,\n};\n\nexport default injectIntl(LearningHeader);\n"],"mappings":";;;;;;;;;;AAAA,OAAOA,KAAK,IACVC,UAAU,EACVC,QAAQ,EACRC,MAAM,EACNC,SAAS,EACTC,WAAW,QACN,OAAO;AACd,OAAOC,SAAS,MAAM,YAAY;AAClC,SAASC,SAAS,QAAQ,wBAAwB;AAClD,SAASC,UAAU,EAAEC,SAAS,QAAQ,6BAA6B;AACnE,SAASC,mBAAmB,QAAQ,6BAA6B;AACjE,SAASC,UAAU,QAAQ,8BAA8B;AACzD,SAASC,MAAM,IAAIC,SAAS,QAAQ,iBAAiB;AACrD,SAASC,aAAa,QAAQ,kBAAkB;AAChD,OAAOC,OAAO,MAAM,WAAW;AAE/B,OAAOC,iBAAiB,MAAM,qBAAqB;AACnD,OAAOC,yBAAyB,MAAM,6BAA6B;AACnE,OAAOC,QAAQ,MAAM,YAAY;AACjC,OAAOC,eAAe,MAAM,qBAAqB;AAEjD,IAAMC,UAAU,GAAG,SAAbA,UAAUA,CAAAC,IAAA;EAAA,IACdC,IAAI,GAAAD,IAAA,CAAJC,IAAI;IACJC,GAAG,GAAAF,IAAA,CAAHE,GAAG;IACHC,GAAG,GAAAH,IAAA,CAAHG,GAAG;IACAC,UAAU,GAAAC,wBAAA,CAAAL,IAAA,EAAAM,SAAA;EAAA,oBAEb3B,KAAA,CAAA4B,aAAA,MAAAC,QAAA;IAAGP,IAAI,EAAEA;EAAK,GAAKG,UAAU,gBAC3BzB,KAAA,CAAA4B,aAAA;IAAKE,SAAS,EAAC,SAAS;IAACP,GAAG,EAAEA,GAAI;IAACC,GAAG,EAAEA;EAAI,CAAE,CAC7C,CAAC;AAAA,CACL;AAEDJ,UAAU,CAACW,SAAS,GAAG;EACrBT,IAAI,EAAEhB,SAAS,CAAC0B,MAAM,CAACC,UAAU;EACjCV,GAAG,EAAEjB,SAAS,CAAC0B,MAAM,CAACC,UAAU;EAChCT,GAAG,EAAElB,SAAS,CAAC0B,MAAM,CAACC;AACxB,CAAC;AAED,IAAMC,cAAc,GAAG,SAAjBA,cAAcA,CAAAC,KAAA,EAEd;EAAA,IAAAC,YAAA;EAAA,IADJC,SAAS,GAAAF,KAAA,CAATE,SAAS;IAAEC,YAAY,GAAAH,KAAA,CAAZG,YAAY;IAAEC,WAAW,GAAAJ,KAAA,CAAXI,WAAW;IAAEC,IAAI,GAAAL,KAAA,CAAJK,IAAI;IAAEC,gBAAgB,GAAAN,KAAA,CAAhBM,gBAAgB;EAE5D,IAAAC,WAAA,GAA8BzC,UAAU,CAACU,UAAU,CAAC;IAA5CgC,iBAAiB,GAAAD,WAAA,CAAjBC,iBAAiB;EACzB,IAAAC,SAAA,GAAgD1C,QAAQ,CAAC,KAAK,CAAC;IAAA2C,UAAA,GAAAC,cAAA,CAAAF,SAAA;IAAxDG,gBAAgB,GAAAF,UAAA;IAAEG,mBAAmB,GAAAH,UAAA;EAC5C,IAAMI,SAAS,GAAGnC,aAAa,CAAC;IAAEoC,KAAK,EAAE;EAAqB,CAAC,CAAC;EAChE,IAAMC,GAAG,GAAGhD,MAAM,CAAC,CAAC;EAEpB,IAAMiD,UAAU,gBACdpD,KAAA,CAAA4B,aAAA,CAACR,UAAU;IACTU,SAAS,EAAC,WAAW;IACrBR,IAAI,KAAA+B,MAAA,CAAK9C,SAAS,CAAC,CAAC,CAAC+C,YAAY,eAAa;IAC9C/B,GAAG,EAAEhB,SAAS,CAAC,CAAC,CAACgD,QAAS;IAC1B/B,GAAG,EAAEjB,SAAS,CAAC,CAAC,CAACiD;EAAU,CAC5B,CACF;EAED,IAAMC,UAAU,GAAG,2BAA2B;EAC9C,IAAMC,UAAU,GAAG,oCAAoC;EACvD,IAAMC,cAAc,GAAGV,SAAS,IAAI,CAACF,gBAAgB;EAErD,IAAMa,MAAM,GAAGC,MAAM,CAACC,QAAQ,CAACC,QAAQ,CAACC,OAAO,CAAC,MAAM,EAAE,EAAE,CAAC;EAE3D,IAAMC,QAAQ,IAAA7B,YAAA,GAAGrB,OAAO,CAACmD,GAAG,CAAC,6BAA6B,EAAE;IAAEN,MAAM,EAANA;EAAO,CAAC,CAAC,cAAAxB,YAAA,cAAAA,YAAA,GAAI,IAAI;EAE/E,IAAM+B,oBAAoB,GAAG,SAAvBA,oBAAoBA,CAAIC,KAAK,EAAK;IAAA,IAAAC,mBAAA;IACtC,IAAMC,WAAW,IAAAD,mBAAA,GAAGD,KAAK,CAACG,MAAM,CAACC,KAAK,cAAAH,mBAAA,cAAAA,mBAAA,GAAI,IAAI;IAC9CtD,OAAO,CAAC0D,GAAG,CAAC,6BAA6B,EAAEH,WAAW,EAAE;MAAEV,MAAM,EAANA;IAAO,CAAC,CAAC;IACnEC,MAAM,CAACC,QAAQ,CAACY,MAAM,CAAC,CAAC;EAC1B,CAAC;EAED,IAAMC,WAAW,GAAGtE,WAAW,CAAC,UAAC+D,KAAK,EAAK;IACzC,IAAIjB,GAAG,CAACyB,OAAO,IAAI,CAACzB,GAAG,CAACyB,OAAO,CAACC,QAAQ,CAACT,KAAK,CAACG,MAAM,CAAC,IAAIxB,gBAAgB,EAAE;MAC1EC,mBAAmB,CAAC,KAAK,CAAC;IAC5B;EACF,CAAC,EAAE,CAACD,gBAAgB,CAAC,CAAC;EAEtB3C,SAAS,CAAC,YAAM;IACd0E,QAAQ,CAACC,gBAAgB,CAAC,OAAO,EAAEJ,WAAW,CAAC;IAE/C,OAAO,YAAM;MACXG,QAAQ,CAACE,mBAAmB,CAAC,OAAO,EAAEL,WAAW,CAAC;IACpD,CAAC;EACH,CAAC,EAAE,CAACA,WAAW,CAAC,CAAC;EAEjB,oBACE3E,KAAA,CAAA4B,aAAA,CAAA5B,KAAA,CAAAiF,QAAA,qBACEjF,KAAA,CAAA4B,aAAA;IAAQE,SAAS,EAAC;EAAiB,gBACjC9B,KAAA,CAAA4B,aAAA;IAAKE,SAAS,EAAC;EAA+B,gBAC5C9B,KAAA,CAAA4B,aAAA;IAAGE,SAAS,EAAC,2BAA2B;IAACR,IAAI,EAAC;EAAe,GAAEkB,IAAI,CAAC0C,aAAa,CAAChE,QAAQ,CAACiE,WAAW,CAAK,CAAC,eAC5GnF,KAAA,CAAA4B,aAAA;IAAKE,SAAS,EAAC;EAAyB,GACrC,CAACmB,SAAS,iBAAIjD,KAAA,CAAA4B,aAAA,CAACf,SAAS;IAACsC,GAAG,EAAEA,GAAI;IAACiC,OAAO,EAAErC,gBAAiB;IAACsC,MAAM,EAAErC;EAAoB,CAAE,CAAC,eAC9FhD,KAAA,CAAA4B,aAAA;IAAKE,SAAS,EAAC;EAAiB,GAC7BsB,UAAU,eACXpD,KAAA,CAAA4B,aAAA;IAAKE,SAAS,EAAC;EAAqB,gBAClC9B,KAAA,CAAA4B,aAAA;IAAKE,SAAS,EAAC;EAAc,GAAE2B,UAAgB,CAAC,eAChDzD,KAAA,CAAA4B,aAAA;IAAKE,SAAS,EAAC;EAAc,GAAE4B,UAAgB,CAC5C,CAAC,eACN1D,KAAA,CAAA4B,aAAA;IAAKE,SAAS,EAAC,iCAAiC;IAACwD,KAAK,EAAE;MAAEC,UAAU,EAAE;IAAE;EAAE,gBACxEvF,KAAA,CAAA4B,aAAA;IAAME,SAAS,EAAC;EAA2C,GAAES,WAAkB,CAAC,eAChFvC,KAAA,CAAA4B,aAAA;IAAME,SAAS,EAAC;EAAmB,GAAEO,SAAS,EAAC,GAAC,EAACC,YAAmB,CACjE,CACF,CAAC,eACNtC,KAAA,CAAA4B,aAAA;IAAKE,SAAS,EAAC;EAAqB,gBAClC9B,KAAA,CAAA4B,aAAA;IAAQE,SAAS,EAAC,mBAAmB;IAAC0C,KAAK,EAAEP,QAAS;IAACuB,IAAI,EAAC,UAAU;IAACC,QAAQ,EAAEtB;EAAqB,gBACpGnE,KAAA,CAAA4B,aAAA;IAAQ4C,KAAK,EAAC;EAAI,GAAC,IAAU,CAAC,eAC9BxE,KAAA,CAAA4B,aAAA;IAAQ4C,KAAK,EAAC;EAAI,GAAC,IAAU,CACvB,CAAC,EACR/B,gBAAgB,IAAIE,iBAAiB,iBACtC3C,KAAA,CAAA4B,aAAA,CAACX,yBAAyB;IACxByE,QAAQ,EAAE/C,iBAAiB,CAAC+C;EAAS,CACtC,CACA,EACAjD,gBAAgB,IAAI,CAACE,iBAAiB,iBACvC3C,KAAA,CAAA4B,aAAA,CAACZ,iBAAiB,MAAE,CAEjB,CACF,CACF,CAAC,eAENhB,KAAA,CAAA4B,aAAA;IAAKE,SAAS,EAAC;EAAQ,gBACrB9B,KAAA,CAAA4B,aAAA;IAAKE,SAAS,EAAC;EAAkB,gBAC/B9B,KAAA,CAAA4B,aAAA,aAAK6B,UAAe,CAAC,eACrBzD,KAAA,CAAA4B,aAAA,aAAI,cAAgB,CACjB,CACF,CAAC,EAEL,CAAC+B,cAAc,KACdhB,iBAAiB,gBACf3C,KAAA,CAAA4B,aAAA;IAAKE,SAAS,EAAC;EAAa,gBAC1B9B,KAAA,CAAA4B,aAAA;IAAKE,SAAS,EAAC;EAAiB,gBAC9B9B,KAAA,CAAA4B,aAAA;IAAGN,IAAI,KAAA+B,MAAA,CAAK9C,SAAS,CAAC,CAAC,CAAC+C,YAAY;EAAG,GACpCd,IAAI,CAAC0C,aAAa,CAAChE,QAAQ,CAACyE,SAAS,CACrC,CACA,CAAC,eACN3F,KAAA,CAAA4B,aAAA;IAAKE,SAAS,EAAC;EAAiB,gBAC9B9B,KAAA,CAAA4B,aAAA;IAAGN,IAAI,KAAA+B,MAAA,CAAK9C,SAAS,CAAC,CAAC,CAAC+C,YAAY;EAAW,GAC5Cd,IAAI,CAAC0C,aAAa,CAAChE,QAAQ,CAAC0E,OAAO,CACnC,CACA,CAAC,eACN5F,KAAA,CAAA4B,aAAA;IAAKE,SAAS,EAAC;EAAiB,gBAC9B9B,KAAA,CAAA4B,aAAA;IAAGN,IAAI,KAAA+B,MAAA,CAAK9C,SAAS,CAAC,CAAC,CAACsF,mBAAmB,SAAAxC,MAAA,CAAMV,iBAAiB,CAAC+C,QAAQ;EAAG,GAC3ElD,IAAI,CAAC0C,aAAa,CAAChE,QAAQ,CAAC4E,OAAO,CACnC,CACA,CAAC,eACN9F,KAAA,CAAA4B,aAAA;IAAKE,SAAS,EAAC;EAAiB,gBAC9B9B,KAAA,CAAA4B,aAAA;IAAGN,IAAI,KAAA+B,MAAA,CAAK9C,SAAS,CAAC,CAAC,CAACwF,oBAAoB;EAAG,GAC5CvD,IAAI,CAAC0C,aAAa,CAAChE,QAAQ,CAAC8E,OAAO,CACnC,CACA,CAAC,eACNhG,KAAA,CAAA4B,aAAA;IAAKE,SAAS,EAAC;EAAiB,gBAC9B9B,KAAA,CAAA4B,aAAA;IAAGN,IAAI,KAAA+B,MAAA,CAAK9C,SAAS,CAAC,CAAC,CAAC0F,UAAU;EAAG,GAClCzD,IAAI,CAAC0C,aAAa,CAAChE,QAAQ,CAACgF,OAAO,CACnC,CACA,CACF,CAAC,gBAENlG,KAAA,CAAA4B,aAAA;IAAKE,SAAS,EAAC;EAAa,gBAC1B9B,KAAA,CAAA4B,aAAA;IAAKE,SAAS,EAAC;EAAiB,gBAC9B9B,KAAA,CAAA4B,aAAA;IAAGN,IAAI,KAAA+B,MAAA,CAAK9C,SAAS,CAAC,CAAC,CAAC+C,YAAY,qBAAAD,MAAA,CAAkB8C,kBAAkB,CAACC,MAAM,CAACtC,QAAQ,CAACxC,IAAI,CAAC;EAAG,GAC9FkB,IAAI,CAAC0C,aAAa,CAAC/D,eAAe,CAACkF,oBAAoB,CACvD,CACA,CAAC,eACNrG,KAAA,CAAA4B,aAAA;IAAKE,SAAS,EAAC;EAAiB,gBAC9B9B,KAAA,CAAA4B,aAAA;IAAGN,IAAI,KAAA+B,MAAA,CAAK3C,mBAAmB,CAAC0F,MAAM,CAACtC,QAAQ,CAACxC,IAAI,CAAC;EAAG,GACrDkB,IAAI,CAAC0C,aAAa,CAAC/D,eAAe,CAACmF,kBAAkB,CACrD,CACA,CACF,CACN,CAEG,CAAC,eACTtG,KAAA,CAAA4B,aAAA;IAAKE,SAAS,EAAC;EAAe,CAAE,CAChC,CAAC;AAEP,CAAC;AAEDI,cAAc,CAACH,SAAS,GAAG;EACzBM,SAAS,EAAE/B,SAAS,CAAC0B,MAAM;EAC3BM,YAAY,EAAEhC,SAAS,CAAC0B,MAAM;EAC9BO,WAAW,EAAEjC,SAAS,CAAC0B,MAAM;EAC7BQ,IAAI,EAAE/B,SAAS,CAACwB,UAAU;EAC1BQ,gBAAgB,EAAEnC,SAAS,CAACiG;AAC9B,CAAC;AAEDrE,cAAc,CAACsE,YAAY,GAAG;EAC5BnE,SAAS,EAAE,IAAI;EACfC,YAAY,EAAE,IAAI;EAClBC,WAAW,EAAE,IAAI;EACjBE,gBAAgB,EAAE;AACpB,CAAC;AAED,eAAejC,UAAU,CAAC0B,cAAc,CAAC"}