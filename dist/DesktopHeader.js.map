{"version":3,"file":"DesktopHeader.js","names":["React","PropTypes","injectIntl","intlShape","getConfig","Menu","MenuTrigger","MenuContent","Avatar","LinkedLogo","Logo","messages","CaretIcon","DesktopHeader","Component","constructor","props","renderMainMenu","mainMenu","Array","isArray","map","menuItem","type","href","content","submenuContent","createElement","key","className","tag","respondToPointerEvents","role","focusable","renderAppMenu","appMenu","appMenuContent","menuItems","transitionClassName","transitionTimeout","_ref","renderUserMenu","userMenu","avatar","username","intl","formatMessage","size","src","alt","_ref2","renderLoggedOutItems","loggedOutItems","item","i","arr","length","render","logo","logoAltText","logoDestination","loggedIn","logoProps","logoClasses","AUTHN_MINIMAL_HEADER","_extends","propTypes","oneOfType","node","array","arrayOf","shape","oneOf","string","bool","isRequired","defaultProps"],"sources":["../src/DesktopHeader.jsx"],"sourcesContent":["import React from 'react';\nimport PropTypes from 'prop-types';\nimport { injectIntl, intlShape } from '@edx/frontend-platform/i18n';\nimport { getConfig } from '@edx/frontend-platform';\n\n// Local Components\nimport { Menu, MenuTrigger, MenuContent } from './Menu';\nimport Avatar from './Avatar';\nimport { LinkedLogo, Logo } from './Logo';\n\n// i18n\nimport messages from './Header.messages';\n\n// Assets\nimport { CaretIcon } from './Icons';\n\nclass DesktopHeader extends React.Component {\n  constructor(props) { // eslint-disable-line no-useless-constructor\n    super(props);\n  }\n\n  renderMainMenu() {\n    const { mainMenu } = this.props;\n\n    // Nodes are accepted as a prop\n    if (!Array.isArray(mainMenu)) {\n      return mainMenu;\n    }\n\n    return mainMenu.map((menuItem) => {\n      const {\n        type,\n        href,\n        content,\n        submenuContent,\n      } = menuItem;\n\n      if (type === 'item') {\n        return (\n          <a key={`${type}-${content}`} className=\"nav-link\" href={href}>{content}</a>\n        );\n      }\n\n      return (\n        <Menu key={`${type}-${content}`} tag=\"div\" className=\"nav-item\" respondToPointerEvents>\n          <MenuTrigger tag=\"a\" className=\"nav-link d-inline-flex align-items-center\" href={href}>\n            {content} <CaretIcon role=\"img\" aria-hidden focusable=\"false\" />\n          </MenuTrigger>\n          <MenuContent className=\"pin-left pin-right shadow py-2\">\n            {submenuContent}\n          </MenuContent>\n        </Menu>\n      );\n    });\n  }\n\n  // Renders an optional App Menu for\n  renderAppMenu() {\n    const { appMenu } = this.props;\n    const { content: appMenuContent, menuItems } = appMenu;\n    return (\n      <Menu transitionClassName=\"menu-dropdown\" transitionTimeout={250}>\n        <MenuTrigger tag=\"a\" className=\"nav-link d-inline-flex align-items-center\">\n          {appMenuContent} <CaretIcon role=\"img\" aria-hidden focusable=\"false\" />\n        </MenuTrigger>\n        <MenuContent className=\"mb-0 dropdown-menu show dropdown-menu-right pin-right shadow py-2\">\n          {menuItems.map(({ type, href, content }) => (\n            <a className={`dropdown-${type}`} key={`${type}-${content}`} href={href}>{content}</a>\n          ))}\n        </MenuContent>\n      </Menu>\n    );\n  }\n\n  renderUserMenu() {\n    const {\n      userMenu,\n      avatar,\n      username,\n      intl,\n    } = this.props;\n\n    return (\n      <Menu transitionClassName=\"menu-dropdown\" transitionTimeout={250}>\n        <MenuTrigger\n          tag=\"button\"\n          aria-label={intl.formatMessage(messages['header.label.account.menu.for'], { username })}\n          className=\"btn btn-outline-primary d-inline-flex align-items-center pl-2 pr-3\"\n        >\n          <Avatar size=\"1.5em\" src={avatar} alt=\"\" className=\"mr-2\" />\n          {username} <CaretIcon role=\"img\" aria-hidden focusable=\"false\" />\n        </MenuTrigger>\n        <MenuContent className=\"mb-0 dropdown-menu show dropdown-menu-right pin-right shadow py-2\">\n          {userMenu.map(({ type, href, content }) => (\n            <a className={`dropdown-${type}`} key={`${type}-${content}`} href={href}>{content}</a>\n          ))}\n        </MenuContent>\n      </Menu>\n    );\n  }\n\n  renderLoggedOutItems() {\n    const { loggedOutItems } = this.props;\n\n    return loggedOutItems.map((item, i, arr) => (\n      <a\n        key={`${item.type}-${item.content}`}\n        className={i < arr.length - 1 ? 'btn mr-2 btn-link' : 'btn mr-2 btn-outline-primary'}\n        href={item.href}\n      >\n        {item.content}\n      </a>\n    ));\n  }\n\n  render() {\n    const {\n      logo,\n      logoAltText,\n      logoDestination,\n      loggedIn,\n      intl,\n      appMenu,\n    } = this.props;\n    const logoProps = { src: logo, alt: logoAltText, href: logoDestination };\n    const logoClasses = getConfig().AUTHN_MINIMAL_HEADER ? 'mw-100' : null;\n\n    return (\n      <header className=\"site-header-desktop\">\n        <a className=\"nav-skip sr-only sr-only-focusable\" href=\"#main\">{intl.formatMessage(messages['header.label.skip.nav'])}</a>\n        <div className={`container-fluid ${logoClasses}`}>\n          <div className=\"nav-container position-relative d-flex align-items-center\">\n            {logoDestination === null ? <Logo className=\"logo\" src={logo} alt={logoAltText} /> : <LinkedLogo className=\"logo\" {...logoProps} />}\n            <nav\n              aria-label={intl.formatMessage(messages['header.label.main.nav'])}\n              className=\"nav main-nav\"\n            >\n              {this.renderMainMenu()}\n            </nav>\n            {appMenu ? (\n              <nav\n                aria-label={intl.formatMessage(messages['header.label.app.nav'])}\n                className=\"nav app-nav\"\n              >\n                {this.renderAppMenu()}\n              </nav>\n            ) : null}\n            <nav\n              aria-label={intl.formatMessage(messages['header.label.secondary.nav'])}\n              className=\"nav secondary-menu-container align-items-center ml-auto\"\n            >\n              {loggedIn ? this.renderUserMenu() : this.renderLoggedOutItems()}\n            </nav>\n          </div>\n        </div>\n      </header>\n    );\n  }\n}\n\nDesktopHeader.propTypes = {\n  mainMenu: PropTypes.oneOfType([\n    PropTypes.node,\n    PropTypes.array,\n  ]),\n  userMenu: PropTypes.arrayOf(PropTypes.shape({\n    type: PropTypes.oneOf(['item', 'menu']),\n    href: PropTypes.string,\n    content: PropTypes.string,\n  })),\n  loggedOutItems: PropTypes.arrayOf(PropTypes.shape({\n    type: PropTypes.oneOf(['item', 'menu']),\n    href: PropTypes.string,\n    content: PropTypes.string,\n  })),\n  logo: PropTypes.string,\n  logoAltText: PropTypes.string,\n  logoDestination: PropTypes.string,\n  avatar: PropTypes.string,\n  username: PropTypes.string,\n  loggedIn: PropTypes.bool,\n\n  // i18n\n  intl: intlShape.isRequired,\n\n  // appMenu\n  appMenu: PropTypes.shape(\n    {\n      content: PropTypes.string,\n      menuItems: PropTypes.arrayOf(\n        PropTypes.shape({\n          type: PropTypes.string,\n          href: PropTypes.string,\n          content: PropTypes.string,\n        }),\n      ),\n    },\n  ),\n};\n\nDesktopHeader.defaultProps = {\n  mainMenu: [],\n  userMenu: [],\n  loggedOutItems: [],\n  logo: null,\n  logoAltText: null,\n  logoDestination: null,\n  avatar: null,\n  username: null,\n  loggedIn: false,\n  appMenu: null,\n};\n\nexport default injectIntl(DesktopHeader);\n"],"mappings":"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"}